(this["webpackJsonpopz-giffer"]=this["webpackJsonpopz-giffer"]||[]).push([[0],{22:function(n,e,t){n.exports=t(36)},27:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),i=(t(27),t(5)),u=t(8),s=t(3),f=t(1),l=t.n(f),p=t(2),d=t(4),h=t(15),g=t.n(h),v=function(){var n=Object(p.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new FileReader;t.onload=function(e){n(e.target.result)},t.readAsDataURL(e)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=Object(p.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new Image;t.onload=function(e){n(t)},t.src=e})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),m=function(){var n=Object(p.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new g.a({gif:e,auto_play:!1});t.load((function(){n(t)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=Object(p.a)(l.a.mark((function n(e){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(e);case 2:return t=n.sent,document.createElement("div").appendChild(t),n.next=7,m(t);case 7:return n.abrupt("return",n.sent.get_frames());case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=function(n,e){var t=e.width,r=e.width/1014*468,a=(e.height-r)/2;n.putImageData(e,0,-a,0,a,t,r)},j=function(n,e){var t=n.getContext("2d");null!==t&&(x(t,e),t.drawImage(n,0,0))},k=function(n){var e=Math.floor(2e3/(10*n[0].delay));return Object(i.a)(new Array(30)).map((function(t,r){return O(e>=n.length?n.length:e,r)}))},O=function(n,e){var t=n/30;return Math.floor(e*t)},y=function(n){return 22+512*Math.floor(n/4)},E=function(){var n=Object(p.a)(l.a.mark((function n(e){var t,r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((t=document.createElement("canvas")).width=4096,t.height=4096,null!==(r=t.getContext("2d"))){n.next=6;break}throw Error("Cannot create canvas");case 6:for(a in e)r.putImageData(e[a],5+a%4*1024,y(a));return r.drawImage(t,0,0),n.abrupt("return",t.toDataURL("image/png"));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function C(){var n=Object(s.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n  opacity: 0;\n"]);return C=function(){return n},n}function I(){var n=Object(s.a)(["\n  width: 338px;\n  height: 156px;\n  background: black;\n  position: relative;\n  margin-right: 20px;\n"]);return I=function(){return n},n}function A(){var n=Object(s.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n"]);return A=function(){return n},n}var S=d.a.canvas(A()),W=d.a.div(I()),R=d.a.input(C()),U=function(n){var e=n.onSpriteUpdate,t=Object(r.useState)(""),o=Object(u.a)(t,2),c=o[0],i=o[1],s=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==s&&null!==s.current&&(console.log("restart"),b(c).then((function(n){!function(n,e){var t=1014/e[0].data.width;n.getContext("2d").scale(t,t)}(s.current,n),function(n,e){var t=0,r=k(e);setInterval((function(){var a=e[r[t%30]].data;j(n,a),t++}),2e3/30)}(s.current,n),E(function(n,e){return e.map((function(e){var t=document.createElement("canvas");t.width=1014,t.height=468;var r=n[e].data,a=1014/r.width,o=t.getContext("2d");if(null===o)throw Error("Cannot get context");return x(o,r),o.scale(a,a),o.drawImage(t,0,0),o.getImageData(0,0,1014,468)}))}(n,k(n))).then(e)})))}),[c]),a.a.createElement(W,null,a.a.createElement(S,{ref:s,width:1014,height:468}),a.a.createElement(R,{type:"file",onChange:function(){var n=Object(p.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e.target.files&&"image/gif"===e.target.files[0].type){n.next=2;break}return n.abrupt("return");case 2:return n.t0=i,n.next=5,v(e.target.files[0]);case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}))},D=t(19),z=t.n(D),F=t(20);function L(){var n=Object(s.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: repeat(auto-fill, minmax(338px, 1fr));\n"]);return L=function(){return n},n}function P(){var n=Object(s.a)([""]);return P=function(){return n},n}var M=d.a.span(P()),G=d.a.div(L());var T=function(){var n=function(){var n=Object(r.useState)(Object(i.a)(new Array(16)).map((function(){return""}))),e=Object(u.a)(n,2),t=e[0],a=e[1],o=Object(r.useCallback)((function(n,e){var r=Object(i.a)(t);r[n]=e,a(r)}),[t]);return[t,o]}(),e=Object(u.a)(n,2),t=e[0],o=e[1],c=Object(r.useCallback)((function(n){return function(e){o(n,e)}}),[o]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{onClick:function(){var n=new z.a,e=n.folder("GIFs");t.forEach((function(n,t){""!==n&&(console.log(n),e.file("GIF-Looper-Template-Spritesheet".concat(t+1<10?"0":"").concat(t+1,".png"),n.replace("data:image/png;base64,",""),{base64:!0}))})),n.generateAsync({type:"blob"}).then((function(n){Object(F.saveAs)(n,"GIFs.zip")}))}},"Download"),a.a.createElement(G,null,t.map((function(n,e){return a.a.createElement(U,{key:e,onSpriteUpdate:c(e)})}))))},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/opz-gif",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/opz-gif","/service-worker.js");B?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):J(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(e,n)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.13e264d8.chunk.js.map