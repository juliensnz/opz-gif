(this["webpackJsonpopz-giffer"]=this["webpackJsonpopz-giffer"]||[]).push([[0],{22:function(t,n,e){t.exports=e(36)},27:function(t,n,e){},36:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),c=e(14),o=e.n(c),u=(e(27),e(5)),i=e(8),f=e(3),s=e(1),l=e.n(s),p=e(2),h=e(4),d=e(15),g=e.n(d),v=function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=new FileReader;e.onload=function(n){t(n.target.result)},e.readAsDataURL(n)})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),m=function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=new Image;e.onload=function(n){t(e)},e.src=n})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),w=function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=new g.a({gif:n,auto_play:!1});e.load((function(){t(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),b=function(){var t=Object(p.a)(l.a.mark((function t(n){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n);case 2:return e=t.sent,document.createElement("div").appendChild(e),t.next=7,w(e);case 7:return t.abrupt("return",t.sent.get_frames());case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),x=function(t,n){var e=n.width,r=n.width/1014*468,a=(n.height-r)/2;t.putImageData(n,0,-a,0,a,e,r)},j=function(t,n){var e=t.getContext("2d");null!==e&&(x(e,n),e.drawImage(t,0,0))},O=function(t){var n=Math.floor(2e3/(10*t[0].delay));return Object(u.a)(new Array(30)).map((function(e,r){return y(n>=t.length?t.length:n,r)}))},y=function(t,n){var e=t/30;return Math.floor(n*e)},k=function(t){return 22+512*Math.floor(t/4)},E=function(){var t=Object(p.a)(l.a.mark((function t(n){var e,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=document.createElement("canvas")).width=4096,e.height=4096,null!==(r=e.getContext("2d"))){t.next=6;break}throw Error("Cannot create canvas");case 6:for(a in n)r.putImageData(n[a],5+a%4*1024,k(a));return r.drawImage(e,0,0),t.abrupt("return",e.toDataURL("image/png"));case 9:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();function I(){var t=Object(f.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n  opacity: 0;\n"]);return I=function(){return t},t}function C(){var t=Object(f.a)(["\n  width: 338px;\n  height: 156px;\n  background: black;\n  position: relative;\n  margin-right: 20px;\n"]);return C=function(){return t},t}function D(){var t=Object(f.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n"]);return D=function(){return t},t}var S=h.a.canvas(D()),A=h.a.div(C()),F=h.a.input(I()),M=function(t){var n=t.onSpriteUpdate,e=Object(r.useState)(""),c=Object(i.a)(e,2),o=c[0],u=c[1],f=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==f&&null!==f.current&&(console.log("restart"),b(o).then((function(t){!function(t,n){var e=1014/n[0].data.width;t.getContext("2d").scale(e,e)}(f.current,t),function(t,n){var e=0,r=O(n);setInterval((function(){var a=n[r[e%30]].data;j(t,a),e++}),2e3/30)}(f.current,t),E(function(t,n){return n.map((function(n){var e=document.createElement("canvas");e.width=1014,e.height=468;var r=t[n].data,a=1014/r.width,c=e.getContext("2d");if(null===c)throw Error("Cannot get context");return x(c,r),c.scale(a,a),c.drawImage(e,0,0),c.getImageData(0,0,1014,468)}))}(t,O(t))).then(n)})))}),[o]),a.a.createElement(A,null,a.a.createElement(S,{ref:f,width:1014,height:468}),a.a.createElement(F,{type:"file",onChange:function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n.target.files&&"image/gif"===n.target.files[0].type){t.next=2;break}return t.abrupt("return");case 2:return t.t0=u,t.next=5,v(n.target.files[0]);case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()}))},R=e(19),U=e.n(R),z=e(20);function G(){var t=Object(f.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: repeat(auto-fill, minmax(338px, 1fr));\n"]);return G=function(){return t},t}function L(){var t=Object(f.a)([""]);return L=function(){return t},t}var P=h.a.span(L()),B=h.a.div(G());var J=function(){var t=function(){var t=Object(r.useState)(Object(u.a)(new Array(16)).map((function(){return""}))),n=Object(i.a)(t,2),e=n[0],a=n[1],c=Object(r.useCallback)((function(t,n){var r=Object(u.a)(e);r[t]=n,a(r)}),[e]);return[e,c]}(),n=Object(i.a)(t,2),e=n[0],c=n[1],o=Object(r.useCallback)((function(t){return function(n){c(t,n)}}),[c]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(P,{onClick:function(){var t=new U.a,n=t.folder("GIFs");e.forEach((function(t,e){""!==t&&(console.log(t),n.file("GIF-Looper-Template-Spritesheet".concat(e+1<10?"0":"").concat(e+1,".png"),t.replace("data:image/png;base64,",""),{base64:!0}))})),t.generateAsync({type:"blob"}).then((function(t){Object(z.saveAs)(t,"GIFs.zip")}))}},"Download"),a.a.createElement(B,null,e.map((function(t,n){return a.a.createElement(M,{key:n,onSpriteUpdate:o(n)})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.6a040b5c.chunk.js.map