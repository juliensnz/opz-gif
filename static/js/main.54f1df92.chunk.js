(this["webpackJsonpopz-giffer"]=this["webpackJsonpopz-giffer"]||[]).push([[0],{22:function(n,e,t){n.exports=t(36)},27:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),i=(t(27),t(1)),u=t.n(i),s=t(2),l=t(6),f=t(5),p=t(3),d=t(4),h=t(15),v=t.n(h),g=function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new FileReader;t.onload=function(e){n(e.target.result)},t.readAsDataURL(e)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new Image;t.onload=function(e){n(t)},t.src=e})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),m=function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new XMLHttpRequest;t.onload=function(){var r=new FileReader;r.onloadend=function(){if(null===r.result)throw Error('Cannot fetch "'.concat(e,'"'));n(r.result)},r.readAsDataURL(t.response)},t.open("GET",e),t.responseType="blob",t.send()})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var t=new v.a({gif:e,auto_play:!1});t.load((function(){n(t)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(e);case 2:return t=n.sent,document.createElement("div").appendChild(t),n.next=7,b(t);case 7:return n.abrupt("return",n.sent.get_frames());case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(n,e){var t=e.width,r=e.width/1014*468,a=(e.height-r)/2;n.putImageData(e,0,-a,0,a,t,r)},y=function(n,e){var t=n.getContext("2d");null!==t&&(j(t,e),t.drawImage(n,0,0,1014,468))},O=function(n){var e=Math.floor(2e3/(10*n[0].delay));return Object(l.a)(new Array(30)).map((function(t,r){return k(e>=n.length?n.length:e,r)}))},k=function(n,e){var t=n/30;return Math.floor(e*t)},E=function(n){return 22+512*Math.floor(n/4)},C=function(){var n=Object(s.a)(u.a.mark((function n(e){var t,r,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((t=document.createElement("canvas")).width=4096,t.height=4096,null!==(r=t.getContext("2d"))){n.next=6;break}throw Error("Cannot create canvas");case 6:for(a in e)r.putImageData(e[a],5+a%4*1024,E(a));return r.drawImage(t,0,0),n.abrupt("return",t.toDataURL("image/png"));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function S(){var n=Object(p.a)(["\n  width: 80%;\n  border: none;\n  height: 35px;\n  padding-left: 5px;\n  background-color: black;\n  color: white;\n  margin-top: 5px;\n  line-height: 35px;\n  text-align: center;\n  text-transform: uppercase;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]);return S=function(){return n},n}function F(){var n=Object(p.a)(["\n  width: 80%;\n  border: none;\n  height: 30px;\n  padding-left: 5px;\n"]);return F=function(){return n},n}function R(){var n=Object(p.a)(["\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  background-color: rgb(233, 177, 61);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return R=function(){return n},n}var A=d.a.div(R()),I=d.a.input(F()),P=d.a.span(S()),L=function(n){var e=n.onChange,t=Object(r.useState)(""),o=Object(f.a)(t,2),c=o[0],i=o[1];return a.a.createElement(A,null,a.a.createElement(I,{type:"text",onChange:function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i(e.currentTarget.value);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),value:c}),a.a.createElement(P,{onClick:function(){e(c),i("")}},"Go"))};function T(){var n=Object(p.a)(["\n  width: 338px;\n  height: 156px;\n  background: black;\n  position: relative;\n\n  &:hover {\n    "," {\n      display: flex;\n    }\n  }\n"]);return T=function(){return n},n}function U(){var n=Object(p.a)(["\n  flex: 1;\n  color: white;\n  text-align: center;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:nth-child(n + 1) {\n    background-color: rgb(233, 177, 61);\n  }\n\n  &:nth-child(n + 2) {\n    background-color: rgb(39, 94, 132);\n  }\n\n  &:nth-child(n + 3) {\n    background-color: rgb(37, 90, 48);\n  }\n"]);return U=function(){return n},n}function W(){var n=Object(p.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  text-transform: uppercase;\n  font-size: 20px;\n  display: none;\n"]);return W=function(){return n},n}function z(){var n=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 100%;\n"]);return z=function(){return n},n}function D(){var n=Object(p.a)(["\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  opacity: 0;\n"]);return D=function(){return n},n}function M(){var n=Object(p.a)(["\n  color: white;\n  font-size: 28px;\n  font-family: sans-serif;\n  font-weight: 100;\n  text-align: center;\n  width: 100%;\n"]);return M=function(){return n},n}function q(){var n=Object(p.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n  background-color: rgb(208, 44, 51);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 100%;\n"]);return q=function(){return n},n}function G(){var n=Object(p.a)(["\n  top: 0px;\n  left: 0px;\n  width: 338px;\n  height: 156px;\n  position: absolute;\n"]);return G=function(){return n},n}var J=d.a.canvas(G()),N=d.a.div(q()),B=d.a.div(M()),_=d.a.input(D()),H=d.a.div(z()),X=d.a.div(W()),Y=d.a.div(U()),$=d.a.div(T(),X),K=function(n){var e=n.gif,t=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(null!==t&&null!==t.current){!function(n,e){var t=1014/e[0].data.width;n.getContext("2d").scale(t,t)}(t.current,e);var n=function(n,e){var t=0,r=O(e);return setInterval((function(){var a=e[r[t%30]].data;y(n,a),t++}),2e3/30)}(t.current,e);return function(){clearInterval(n)}}}),[e]),a.a.createElement(J,{ref:t,width:1014,height:468})},Q=function(n){var e=n.onSpriteUpdate,t=n.index,o=Object(r.useState)([]),c=Object(f.a)(o,2),i=c[0],l=c[1],p=Object(r.useState)(!1),d=Object(f.a)(p,2),h=d[0],v=d[1],w=Object(r.useState)(!1),b=Object(f.a)(w,2),y=b[0],k=b[1];return Object(r.useEffect)((function(){0!==i.length&&C(function(n,e){return e.map((function(e){var t=document.createElement("canvas");t.width=1014,t.height=468;var r=n[e].data,a=1014/r.width,o=t.getContext("2d");if(null===o)throw Error("Cannot get context");return j(o,r),o.scale(a,a),o.drawImage(t,0,0),o.getImageData(0,0,1014,468)}))}(i,O(i))).then(e)}),[i]),a.a.createElement($,null,a.a.createElement(H,null,a.a.createElement(B,null,t)),0!==i.length&&a.a.createElement(K,{gif:i}),a.a.createElement(X,null,0!==i.length?a.a.createElement(Y,{onClick:function(){l([]),e("")}},a.a.createElement("span",null,"Remove")):a.a.createElement(a.a.Fragment,null,a.a.createElement(Y,{onClick:function(){k(!0)}},a.a.createElement("span",null,"Url")),a.a.createElement(Y,null,a.a.createElement("span",null,"File"),a.a.createElement(_,{type:"file",onChange:function(){var n=Object(s.a)(u.a.mark((function n(e){var t,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e.target.files&&"image/gif"===e.target.files[0].type){n.next=2;break}return n.abrupt("return");case 2:return l([]),v(!0),n.next=6,g(e.target.files[0]);case 6:return t=n.sent,n.next=9,x(t);case 9:r=n.sent,l(r),v(!1);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})))),y&&a.a.createElement(L,{onChange:function(){var n=Object(s.a)(u.a.mark((function n(e){var t,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l([]),k(!1),v(!0),n.next=5,m(e);case 5:return t=n.sent,n.next=8,x(t);case 8:r=n.sent,l(r),v(!1);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),h&&a.a.createElement(N,null,a.a.createElement(B,null,"Loading")))},V=t(19),Z=t.n(V),nn=t(20);window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var en=function(){var n=Object(s.a)(u.a.mark((function n(e,t){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.root.getFile(t,{create:!0},(function(e){e.remove((function(){n()}),(function(n){console.error(n),r(n)}))}),(function(n){console.error(n),r(n)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),tn=function(){var n=Object(s.a)(u.a.mark((function n(e,t,r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,en(e,t);case 2:return n.abrupt("return",new Promise((function(n,a){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(e){e.onwriteend=function(e){n()},e.onerror=function(n){console.error(n),a(n)},e.write(new Blob([JSON.stringify(r)],{type:"application/json"}))}),(function(n){console.error(n),a(n)}))}),(function(n){console.error(n),a(n)}))})));case 3:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),rn=function(){var n=Object(s.a)(u.a.mark((function n(e,t){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.root.getFile(t,{create:!0},(function(e){e.file(function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).addEventListener("loadend",(function(e){null===e.currentTarget&&r("no target"),null===e.target.result&&r("no result");try{var t=JSON.parse(e.target.result);n(t)}catch(a){r(a)}})),a.readAsText(t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),(function(n){console.error(n),r(n)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),an=function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){window.requestFileSystem(window.TEMPORARY,209715200,n,(function(n){console.error(n),e(n)}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();function on(){var n=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n"]);return on=function(){return n},n}function cn(){var n=Object(p.a)(["\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: repeat(auto-fill, minmax(338px, 1fr));\n  width: 95vw;\n"]);return cn=function(){return n},n}function un(){var n=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return un=function(){return n},n}function sn(){var n=Object(p.a)([""]);return sn=function(){return n},n}var ln=d.a.span(sn()),fn=d.a.div(un()),pn=d.a.div(cn()),dn=d.a.div(on());var hn=function(){var n=function(){var n=Object(r.useState)(Object(l.a)(new Array(16)).map((function(){return""}))),e=Object(f.a)(n,2),t=e[0],a=e[1],o=Object(r.useCallback)((function(n,e){var r=Object(l.a)(t);r[n]=e,a(r)}),[t]);return Object(r.useEffect)((function(){an().then(function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rn(e,"images.json");case 2:t=n.sent,a(t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){(function(n){return!n.some((function(n){return 0!==n.length}))})(t)||an().then(function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tn(e,"images.json",t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[t]),[t,o]}(),e=Object(f.a)(n,2),t=e[0],o=e[1],c=Object(r.useCallback)((function(n){return function(e){o(n,e)}}),[o]);return a.a.createElement(fn,null,a.a.createElement(ln,{onClick:function(){var n=new Z.a,e=n.folder("GIFs");t.forEach((function(n,t){""!==n&&e.file("GIF-Looper-Template-Spritesheet".concat(t+1<10?"0":"").concat(t+1,".png"),n.replace("data:image/png;base64,",""),{base64:!0})})),n.generateAsync({type:"blob"}).then((function(n){Object(nn.saveAs)(n,"GIFs.zip")}))}},"Download"),a.a.createElement(pn,null,t.map((function(n,e){return a.a.createElement(dn,{key:e},a.a.createElement(Q,{onSpriteUpdate:c(e),index:e+1}))}))))},vn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gn(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(hn,null)),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/opz-gif",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/opz-gif","/service-worker.js");vn?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):gn(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):gn(e,n)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.54f1df92.chunk.js.map